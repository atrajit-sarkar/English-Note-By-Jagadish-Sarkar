\usepackage{fontspec}
\usepackage{polyglossia}

% Main language
\setmainlanguage{english}

% Secondary language
\setotherlanguage{bengali}

% Bibliography (must come after polyglossia)
\usepackage[
    backend=biber,
    style=alphabetic,
    sorting=nyt
]{biblatex}

\usepackage[table]{xcolor}
\usepackage{array}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{mathtools} % For rcases

% Font specifications
% Main English font (default Latin Modern)
% \setmainfont{Latin Modern Roman}

% Handwritten style font
\newfontfamily\handwrittenfont[
    Path = ./,
    UprightFont = HomemadeApple-Regular.ttf
]{HomemadeApple}

% Handwritten environment (use like \begin{handwritten}...\end{handwritten})
\newenvironment{handwritten}{\handwrittenfont}{}

% Font for Bengali
\newfontfamily\bengalifont[
    Script=Bengali,
    Language=Bengali,
    Path = ./,
    UprightFont = TiroBangla-Regular.ttf,
    ItalicFont  = TiroBangla-Italic.ttf
]{TiroBangla}


% Emoji support for XeLaTeX
\newfontfamily\emojifont{Noto Color Emoji}
\newcommand{\emoji}[1]{{\emojifont #1}}

% Custom commands
\newcommand{\RightBracketBlock}[2]{%
\par\vspace{\abovedisplayskip}\noindent
$\begin{rcases}
#1
\end{rcases}
\quad
\begin{array}{l}
#2
\end{array}$
\par\vspace{\belowdisplayskip}
}

% ------- Colors -------
\definecolor{headerbg}{HTML}{1565C0}      % deep blue
\definecolor{headertext}{HTML}{FFFFFF}    % white
\definecolor{subjectcol}{HTML}{E3F2FD}    % light blue
\definecolor{predicatecol}{HTML}{E8F5E9}  % light green
\definecolor{tableline}{HTML}{B0BEC5}     % soft grey

% ragged-right paragraph columns
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}

% Subtopic command
\newcommand{\subtopic}[1]{%
    \begin{center}
        \begin{tikzpicture}
            \node[cloud, draw, cloud puffs=38, cloud puff arc=180, aspect=8, fill=gray!10, inner sep=1pt, inner ysep=1pt] {\underline{\textbf{#1}}};
        \end{tikzpicture}
    \end{center}
}

% Topic end separator
\newcommand{\topicend}{%
  \par\vspace{1.5em}%
  \noindent\begin{center}
    \begin{tikzpicture}[baseline=-0.6ex]
      % Left line
      \draw[line width=1pt, gray!50] (-3,0) -- (-0.9,0);
      % Right line
      \draw[line width=1pt, gray!50] (0.9,0) -- (3,0);

      % Central badge
      \shade[inner color=blue!60, outer color=blue!20, draw=gray!50, line width=0.6pt]
        (0,0) circle (0.32);

      % Inner ring
      \draw[line width=0.5pt, white] (0,0) circle (0.20);

      % Stylised check/mark inside
      \draw[line width=0.7pt, white, rounded corners=0.5pt]
        (-0.10,0.02) -- (-0.02,-0.10) -- (0.13,0.12);

      % Decorative side dots
      \fill[blue!20, draw=gray!50, line width=0.4pt] (-1.1,0) circle (0.06);
      \fill[blue!20, draw=gray!50, line width=0.4pt] ( 1.1,0) circle (0.06);
    \end{tikzpicture}
  \end{center}
  \vspace{0.5em}%
}
